<script type="text/javascript">
    RED.nodes.registerType('AnamicoChangeLight', {
        category: 'lighting',
        color: '#B9FFFF',
        defaults: {
            name: { value : '', required: true, validate: RED.validators.regex(/[a-zA-Z0-9\s]+/) },
            lights: { type: 'AnamicoLights', required: true },
            mode: { value : 'Basic', required : true }
        },
        inputs: 1,
        outputs: 0,
        inputLabels: "new state",
        icon: "bulb.png",
        label: function() {
            return this.name ? this.name + ' (' + this.mode + ')' : 'Unnamed';
        },
        paletteLabel: 'Change Light'
    });
</script>

<script type="text/x-red" data-template-name="AnamicoChangeLight">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-tips">Tip: The light name can be any string, and uniquely identifies THIS particular light, ie: "Kitchen" or "Lounge Downlight 3". This is to identify this exact light,
    it is NOT designed to use the same light name for more than one globe (and it will NOT work). You address group of lights using the array of lights in the updates node message.</div>

    <div class="form-row"> &nbsp;</div>
    <div class="form-row">
        <label for="node-input-lights"><i class="fa fa-server"></i> Lights</label>
        <input type="text" id="node-input-lights" placeholder="Lights">
    </div>

    <div class="form-tips">Tip: create a single 'lights' configuration node to basically be a single house if you want, then use it to manage all lights in that house.</div>

    <div class="form-row"> &nbsp;</div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-lightbulb"></i> Mode</label>
        <select id="node-input-mode">
            <option value='Basic'>Basic</option>
            <option value='Hue'>Hue</option>
            <option value='LIFX'>LIFX</option>
        </select>
    </div>

    <div class="form-tips">Tip: Select the right type of light mode so you can connect it directly and not have to convert any values.</div>
</script>

<script type="text/x-red" data-help-name="AnamicoChangeLight">
    <h3>Light State Collector</h3>
    <p>When a light changes state, it should be wired to send that state to this node to "persist" the state and use it for future events.</p>
    <p>Only connect 1 light to this node. It is designed to manage and persist the state of an exact single globe.</p>

    <h3>Modes</h3>
    <ul>
        <li><b>Basic</b> : raw mode, pretty much matches node-red-contrib-node-lifx format</li>
        <li><b>Hue</b> : Hue mode, accepts messages from node-red-contrib-huemagic nodes</li>
        <li><b>LIFX</b> : lifx mode, accepts messages from node-red-contrib-node-lifx nodes</li>
    </ul>

    <h3>Donate to show your support or gratitude</h3>
    <p>Donations support the open source community and help authors continue to support these projects, please feel free to donate here.
        <a target="donate" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=JUYN6NBFELTC2&source=url"><img src="https://img.shields.io/badge/donate-PayPal-green.svg"></a></p>
</script>
